<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>SetPlayWinApp</title>
  <!-- Link to external stylesheet -->
  <link rel="stylesheet" href="styles.css">
  <!-- Favicon -->
  <link rel="icon" href="docs/favicon.ico" type="image/x-icon">
  <!-- Google Font -->
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
  <!-- wallet connect for token gate -->
  <script src="https://cdn.jsdelivr.net/npm/ethers@5.7.2/dist/ethers.min.js"></script>
</head>

<body>
   <div id="token-gate" style="text-align: center; padding: 2rem;">
    <h1 id="status">Checking NFT access...</h1>
    <div id="wallet-section">
      <button onclick="startVerification()" style="padding: 10px 20px; font-size: 1rem;">Connect Wallet</button>
    </div>
    <div id="purchase-section" style="display: none;">
      <p>You need a CyberPet NFT to access this site.</p>
      <a href="https://opensea.io/collection/cyberpetsai" target="_blank">
        <button>Buy on OpenSea</button>
      </a>
    </div>
  </div>
  <div id="main-site" style="display: none;">
    <!-- Your original page content here (e.g., header, main, footer) -->
    <header class="app-header">
      <div class="logo-section">
        <img src="docs/public/Set_Play_Win_logo_BW.png" alt="SetPlayWin logo" class="logo" />
        </div>
          <h1>SetPlayWin</h1>
          <p>Your Hub for Games, Web3, and Community</p>
        </div>
      </div>
  </header>

  <main>
    <menu class="tab-buttons">
      <button class="active" data-tab="0">Overview</button>
      <button data-tab="1">Key Features</button>
      <button data-tab="2">Core Projects</button>
      <button data-tab="3">Roadmap</button>
      <button data-tab="4">Contact</button>
      <button data-tab="5">FunFart Games</button>
    </menu>

    <div id="tab-content">
      <div class="tab-section active" id="section-0" style="background-image: url('docs/setplaywin_Card0-01.png');">
        <h2>Overview</h2>
        <ul>
          <li>Welcome to SetPlayWinApp, the platform that brings together FunFart Games, DigitalKnuckles, and LazerPixel Dev.</li>
          <li>Explore games, NFTs, tokens, and community utilities in one place!</li>
        </ul>
      </div>
      <div class="tab-section" id="section-1" style="background-image: url('docs/setplaywin_Card4-01.png');">
        <h2>Key Features</h2>
        <ul>
          <li>Interactive Gaming Hub: Play and discover new games, track progress, and compete with others.</li>
          <li>Web3 Integration: Experience blockchain-powered gaming, NFT trading, and token utilities.</li>
          <li>Community-Driven Platform: Connect with enthusiasts, join events, and contribute to projects.</li>
        </ul>
      </div>
      <div class="tab-section" id="section-2" style="background-image: url('docs/setplaywin_Card3-01.png');">
        <h2>Core Projects</h2>
        <ul>
          <li>FunFart Games: Quirky and innovative games like SneakyPootâ€™s Adventures and Toothless Zoo Tycoon.</li>
          <li>DigitalKnuckles: Exclusive NFTs and utilities to enhance your gaming experience.</li>
          <li>LazerPixel Dev: Experimental projects, tutorials, and tools for game developers.</li>
        </ul>
      </div>
      <div class="tab-section" id="section-3" style="background-image: url('docs/setplaywin_Card2-01.png');">
        <h2>Roadmap</h2>
        <ul>
          <li>Phase 1: Launch the gaming hub and NFT marketplace.</li>
          <li>Phase 2: Introduce token utilities and staking rewards.</li>
          <li>Phase 3: Expand community features and co-op gaming modes.</li>
          <li>Phase 4: Launch the SetPlayWin MemeCoin ecosystem.</li>
        </ul>
      </div>
      <div class="tab-section" id="section-4" style="background-image: url('docs/setplaywin_Card-01.png');">
        <h2>Contact</h2>
        <ul>
          <li>Email: setplaywin@gmail.com</li>
          <li>Discord: Join the Community</li>
          <li>Website: <a href="http://www.setplaywin.com" target="_blank">www.setplaywin.com</a></li>
        </ul>
      </div>
      <div class="tab-section" id="section-5" style="background-image: url('docs/setplaywin_Card5-01.png');">
                <h2>FunFart Games</h2>
        <iframe 
          src="docs/public/prizeGrab/index.html"
          width="100%" 
          height="600px" 
          style="border: none; border-radius: 12px;" 
          title="PrizeGrab Game"
          id="prizeGrabIframe">
        </iframe>
        <iframe 
          src="CyberPetsAiTrainer/index.html"
          width="100%" 
          height="600px" 
          style="border: none; border-radius: 12px;" 
          title="CyberPets Ai Trainer"
          id="CyberPetsAiTrainerIframe">
        </iframe>
        <h2>FunFart Games Info</h2>
        <ul>
          <li>Email: funfart85@gmail.com</li>
          <li>Discord: Join the FunFart Games Community on Discord!</li>
          <li>Website: <a href="http://www.funfartgames.com" target="_blank">www.funfartgames.com</a></li>
        </ul>
      </div>
    </div>
  </main>

  <footer>
    <p>&copy; 2024 SetPlayWin. All rights reserved.</p>
  </footer>
      <!-- Token gate script-->
<script src="https://cdn.jsdelivr.net/npm/ethers@5.7.2/dist/ethers.min.js"></script>

<script>
  const nftAddress = "0x1C37df48Fa365B1802D0395eE9F7Db842726Eb81";
  const nftABI = ["function balanceOf(address owner) view returns (uint256)"];
  const signatureMessage = "Sign this message to verify access to CyberPetsAI.";

  function showMainSite() {
    document.getElementById("token-gate").style.display = "none";
    document.getElementById("main-site").style.display = "block";
  }

  async function checkSession() {
    const verified = sessionStorage.getItem("cyberpet_verified");
    if (verified === "true") {
      showMainSite();
    }
  }

  async function startVerification() {
    try {
      if (!window.ethereum) {
        alert("MetaMask is required.");
        return;
      }

      const provider = new ethers.providers.Web3Provider(window.ethereum);
      await provider.send("eth_requestAccounts", []);
      const signer = provider.getSigner();
      const userAddress = await signer.getAddress();

      const contract = new ethers.Contract(nftAddress, nftABI, provider);
      const balance = await contract.balanceOf(userAddress);

      if (balance.toNumber() > 0) {
        const signature = await signer.signMessage(signatureMessage);
        if (signature) {
          sessionStorage.setItem("cyberpet_verified", "true");
          showMainSite();
        }
      } else {
        document.getElementById("status").innerText = "You don't own a CyberPet NFT.";
        document.getElementById("purchase-section").style.display = "block";
      }
    } catch (err) {
      console.error(err);
      document.getElementById("status").innerText = "Verification failed.";
    }
  }

  // Trigger after DOM is fully loaded
  window.addEventListener("DOMContentLoaded", checkSession);
</script>
  
  <script type="module" src="./index.js"></script>
</body>

</html>
